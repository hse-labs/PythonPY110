<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>HTMX hx-trigger –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è</title>
  <script src="https://unpkg.com/htmx.org@2.0.0"></script>
  <style>
    .notification {
      background: #4caf50;
      color: white;
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
      transition: opacity 0.3s ease;
    }
    .hidden {
      opacity: 0;
    }
    .visible {
      opacity: 1;
    }
  </style>
</head>
<body>


  <h2>üõí –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É</h2>

  <!-- –ö–Ω–æ–ø–∫–∞ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å -->
  <button
    hx-post="/htmx/oob_from_cart/add/"
    hx-select-oob="#cart,#notification"
    hx-target="#action-result">
    ‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
  </button>

  <!-- –û–±—ã—á–Ω—ã–π –æ—Ç–∫–ª–∏–∫ -->
  <div id="action-result" class="box">–ñ–¥—ë–º –¥–µ–π—Å—Ç–≤–∏–µ...</div>

  <!-- –ö–æ—Ä–∑–∏–Ω–∞, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ hx-swap-oob -->
  <div id="cart" class="box">üõí –ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>

  <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
  <div id="notification" class="notification hidden"></div>



  <script>
    // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    document.body.addEventListener('htmx:oobAfterSwap', function(evt) {
      if (evt.target.id === "notification") {
        evt.target.classList.remove("hidden");
        evt.target.classList.add("visible");
        setTimeout(() => {
          evt.target.classList.remove("visible");
          evt.target.classList.add("hidden");
        }, 3000);
      }
    });
  </script>
</body>